<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Replicating Elm Architecture - The Concur UI Framework</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="ferris.css">
        
        <link rel="stylesheet" href="theme/2020-edition.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">The Concur UI Framework</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="ch01-02-first-concur-program.html"><strong aria-hidden="true">1.2.</strong> Your first Concur program!</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-quick-tour.html"><strong aria-hidden="true">2.</strong> A Quick Tour of Concur</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-anatomy-of-a-widget.html"><strong aria-hidden="true">2.1.</strong> Anatomy of a Widget</a></li><li class="chapter-item expanded "><a href="ch02-02-widget-return-types.html"><strong aria-hidden="true">2.2.</strong> Widget Return Types</a></li><li class="chapter-item expanded "><a href="ch02-03-composing-widgets.html"><strong aria-hidden="true">2.3.</strong> Composing Widgets</a></li><li class="chapter-item expanded "><a href="ch02-04-event-handling.html"><strong aria-hidden="true">2.4.</strong> Event Handling</a></li><li class="chapter-item expanded "><a href="ch02-05-modifying-dom-on-events.html"><strong aria-hidden="true">2.5.</strong> Modifying DOM on Events</a></li><li class="chapter-item expanded "><a href="ch02-06-handling-multiple-events.html"><strong aria-hidden="true">2.6.</strong> Handling Multiple Events</a></li><li class="chapter-item expanded "><a href="ch02-07-composing-widgets-with-events.html"><strong aria-hidden="true">2.7.</strong> Composing Widgets with Events</a></li><li class="chapter-item expanded "><a href="ch02-08-input-output.html"><strong aria-hidden="true">2.8.</strong> Input Output</a></li></ol></li><li class="chapter-item expanded "><a href="ch03-00-architectural-notes.html"><strong aria-hidden="true">3.</strong> Architectural Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-replicating-elm-architecture.html" class="active"><strong aria-hidden="true">3.1.</strong> Replicating Elm Architecture</a></li><li class="chapter-item expanded "><a href="ch03-02-plan-for-composability-by-breaking-down-components.html"><strong aria-hidden="true">3.2.</strong> Plan for Composability by Breaking Down Components</a></li><li class="chapter-item expanded "><a href="ch03-03-composing-never-ending-widgets.html"><strong aria-hidden="true">3.3.</strong> Composing Never Ending Widgets</a></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-signals.html"><strong aria-hidden="true">4.</strong> Signals</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-introduction-to-signals.html"><strong aria-hidden="true">4.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="ch04-02-your-first-signal.html"><strong aria-hidden="true">4.2.</strong> Your First Signal</a></li><li class="chapter-item expanded "><a href="ch04-03-introduction-to-signals.html"><strong aria-hidden="true">4.3.</strong> Converting Display Widgets</a></li><li class="chapter-item expanded "><a href="ch04-04-signal-composition.html"><strong aria-hidden="true">4.4.</strong> Signal Composition</a></li><li class="chapter-item expanded "><a href="ch04-05-signal-example.html"><strong aria-hidden="true">4.5.</strong> Signal Example</a></li><li class="chapter-item expanded "><a href="ch04-06-some-notes-on-signal-usage.html"><strong aria-hidden="true">4.6.</strong> Some Notes on Signal Usage</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-faqs.html"><strong aria-hidden="true">5.</strong> FAQs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-why-concur.html"><strong aria-hidden="true">5.1.</strong> Why the Concur Model</a></li><li class="chapter-item expanded "><a href="ch05-02-jumping-into-the-middle-of-widgets.html"><strong aria-hidden="true">5.2.</strong> Jumping Into the Middle of Widgets</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Concur UI Framework</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/ajnsit/concur-documentation" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#replicating-elm-architecture" id="replicating-elm-architecture">Replicating Elm Architecture</a></h1>
<p>Concur is strictly more powerful, while simultaneously being easier to use than Elm. We were able to compose widgets, handle events, and dynamically change the page contents without adopting an &quot;architecture&quot;, or manually threading any state or action data structures.</p>
<ol>
<li>
<p>With Concur, there's no magic with effects and actions involved. A 'Widget' means a very simple thing - A section of UI which returns a value. Using this single concept, it's trivial to recreate the Elm architecture, but while remaining in full control, and understanding every step of the process.</p>
</li>
<li>
<p>There is no global state, and you can use local state with as fine a granularity as desired. Moreover, the resulting widget can be used within other widgets without having to thread in its state manually. Everything just works!</p>
</li>
</ol>
<p>Here's an example of building a small form with Concur -</p>
<pre><code class="language-purescript">-- This is like Elm's State
type Form =
  { name :: String
  , rememberMe :: Boolean
  }

-- This is like Elm's Action
data FormAction
  = Name String
  | RememberMe Boolean
  | Submit

formWidget :: Form -&gt; Widget HTML Form
formWidget form = do
  -- This is like Elm's view function
  res &lt;- div'
    [ Name &lt;$&gt; input [_type &quot;text&quot;, value form.name, unsafeTargetValue &lt;$&gt; onChange]
    , RememberMe (not form.rememberMe) &lt;$ input [_type &quot;checkbox&quot;, checked form.rememberMe, onChange]
    , Submit &lt;$ button [onClick] [text &quot;Submit&quot;]
    ]
  -- This is like Elm's update function
  case res of
    Name s -&gt; formWidget (form {name = s})
    RememberMe b -&gt; formWidget (form {rememberMe = b})
    Submit -&gt; pure form
</code></pre>
<p>Now you can use <code>formWidget</code> as a regular widget anywhere else in the rest of your application (<a href="https://github.com/purescript-concur/purescript-concur-react/blob/master/examples/src/Test/TheElmArchitecture.purs">working example</a>). Note that the other parts of your application don't need to know about <code>FormAction</code> at all.</p>
<p>This is surprisingly powerful and composable. Let's build a widget which allows editing an arbitrary list of such forms in a sequence and then returns the list of modified forms. How many more lines of code are needed to accomplish that?</p>
<p>The program is literally two words long i.e. <code>traverse formWidget</code>.</p>
<pre><code class="language-purescript">multiFormWidget :: Array Form -&gt; Widget HTML (Array Form)
multiFormWidget = traverse formWidget
</code></pre>
<p>Here, we use the fact that <code>Widget</code> also has an <code>Applicative</code> instance (along with Functor and Monad instances) -</p>
<p>If instead you wanted to allow editing all the forms together, you would do -</p>
<pre><code class="language-purescript">multiFormWidget :: Array Form -&gt; Widget HTML (Array Form)
multiFormWidget = andd &lt;&lt;&lt; map formWidget
</code></pre>
<p>Compare that with all the plumbing with Events, Actions, and State, that is needed for an equivalent <em>Elm</em> program. It would be even worse with something like <em>Reflex</em> because you would have to keep track of where you were in the list in the editing process, and also, what the values of the previously submitted forms are, and you would have to do that by composing events while manipulating the DOM (try it).</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="ch03-00-architectural-notes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="ch03-02-plan-for-composability-by-breaking-down-components.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="ch03-00-architectural-notes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="ch03-02-plan-for-composability-by-breaking-down-components.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="ferris.js"></script>
        

        

    </body>
</html>
