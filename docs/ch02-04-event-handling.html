<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Event Handling - The Concur UI Framework</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="ferris.css">
        
        <link rel="stylesheet" href="theme/2020-edition.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">The Concur UI Framework</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="ch01-02-first-concur-program.html"><strong aria-hidden="true">1.2.</strong> Your first Concur program!</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-quick-tour.html"><strong aria-hidden="true">2.</strong> A Quick Tour of Concur</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-anatomy-of-a-widget.html"><strong aria-hidden="true">2.1.</strong> Anatomy of a Widget</a></li><li class="chapter-item expanded "><a href="ch02-02-widget-return-types.html"><strong aria-hidden="true">2.2.</strong> Widget Return Types</a></li><li class="chapter-item expanded "><a href="ch02-03-composing-widgets.html"><strong aria-hidden="true">2.3.</strong> Composing Widgets</a></li><li class="chapter-item expanded "><a href="ch02-04-event-handling.html" class="active"><strong aria-hidden="true">2.4.</strong> Event Handling</a></li><li class="chapter-item expanded "><a href="ch02-05-modifying-dom-on-events.html"><strong aria-hidden="true">2.5.</strong> Modifying DOM on Events</a></li><li class="chapter-item expanded "><a href="ch02-06-handling-multiple-events.html"><strong aria-hidden="true">2.6.</strong> Handling Multiple Events</a></li><li class="chapter-item expanded "><a href="ch02-07-composing-widgets-with-events.html"><strong aria-hidden="true">2.7.</strong> Composing Widgets with Events</a></li><li class="chapter-item expanded "><a href="ch02-08-input-output.html"><strong aria-hidden="true">2.8.</strong> Input Output</a></li></ol></li><li class="chapter-item expanded "><a href="ch03-00-architectural-notes.html"><strong aria-hidden="true">3.</strong> Architectural Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-replicating-elm-architecture.html"><strong aria-hidden="true">3.1.</strong> Replicating Elm Architecture</a></li><li class="chapter-item expanded "><a href="ch03-02-plan-for-composability-by-breaking-down-components.html"><strong aria-hidden="true">3.2.</strong> Plan for Composability by Breaking Down Components</a></li><li class="chapter-item expanded "><a href="ch03-03-composing-never-ending-widgets.html"><strong aria-hidden="true">3.3.</strong> Composing Never Ending Widgets</a></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-signals.html"><strong aria-hidden="true">4.</strong> Signals</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-introduction-to-signals.html"><strong aria-hidden="true">4.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="ch04-02-your-first-signal.html"><strong aria-hidden="true">4.2.</strong> Your First Signal</a></li><li class="chapter-item expanded "><a href="ch04-03-introduction-to-signals.html"><strong aria-hidden="true">4.3.</strong> Converting Display Widgets</a></li><li class="chapter-item expanded "><a href="ch04-04-signal-composition.html"><strong aria-hidden="true">4.4.</strong> Signal Composition</a></li><li class="chapter-item expanded "><a href="ch04-05-signal-example.html"><strong aria-hidden="true">4.5.</strong> Signal Example</a></li><li class="chapter-item expanded "><a href="ch04-06-some-notes-on-signal-usage.html"><strong aria-hidden="true">4.6.</strong> Some Notes on Signal Usage</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-faqs.html"><strong aria-hidden="true">5.</strong> FAQs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-why-concur.html"><strong aria-hidden="true">5.1.</strong> Why the Concur Model</a></li><li class="chapter-item expanded "><a href="ch05-02-jumping-into-the-middle-of-widgets.html"><strong aria-hidden="true">5.2.</strong> Jumping Into the Middle of Widgets</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Concur UI Framework</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/ajnsit/concur-documentation" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#event-handling" id="event-handling">Event Handling</a></h1>
<p>In the previous examples, clicking the buttons does nothing. After all, we haven't attached an event handler to the button! Traditionally, responding to user input seems to be the place where complexity creeps into the application. In Elm, for example, this is the place where you would reach out for the <em>Elm Architecture</em>.</p>
<p>Handling external events is where Concur shines. It does away with all the incidental complexity and lets you focus on the program logic. I'll make a claim that handling generic user events in Concur is simpler than any other library/framework in any programming language ever. If you know of anything else simpler, please let me know.</p>
<p>In Concur, you can just attach tags to the widgets to indicate the events you wish to handle, and then handle them synchronously in the program flow. Concur takes care of all the plumbing and concurrency for you. This is part of where Concur's name comes from - its support for Concurrency. The other reason for Concur's name is due to what I call aliasing of types - where adjacent types and properties must agree (concur) before they can be composed, which leads to increased type safety and powerful composition primitives. We'll discuss concurrency and composition primitives later in this guide.</p>
<p>Let's say we want to show a greeting to the user when the button is is clicked. We can do so very easily, by attaching an <code>onClick</code> attribute to the button. We have to use <code>button</code> instead of <code>button'</code>. (<code>button'</code> is defined simply as <code>button []</code> for convenience).</p>
<pre><code class="language-purescript">hello :: forall a. Widget HTML a
hello = do
  void $ button [onClick] [text &quot;Say Hello&quot;]
  text &quot;Hello Sailor!&quot;
</code></pre>
<p>That's right, <code>text</code> is also a complete widget on its own, which we are composing with the <code>button</code> widget. Here we use do-notation to compose two widgets <em>in time</em>. The text widget never runs at the same time as the button, and only shows up when, and as soon as, the button is clicked.</p>
<p>The final effect is that we see a button with the text &quot;Say Hello&quot;, which when clicked gets replaced by text &quot;Hello Sailor!&quot;. Ain't that easy!</p>
<p>Again, pay attention to the final type of the widget. It's the same as before (<code>forall a. Widget HTML a</code>) even though this time we <em>did</em> attach an event handler. However, we handle the event entirely internally, and simply change to a static widget (<code>text</code>) in response. So from the perspective of the rest of the program, the widget never returns.</p>
<h3><a class="header" href="#a-digression-on-the-type-of-a-plain-button-widget" id="a-digression-on-the-type-of-a-plain-button-widget">A digression on the type of a plain button widget</a></h3>
<p>So what <em>is</em> the type when you don't handle the button click event internally? To be specific, what is the type of the following widget -</p>
<pre><code class="language-purescript">button [onClick] [text &quot;Say Hello&quot;]
</code></pre>
<p>The type is <code>Widget HTML SyntheticMouseEvent</code>, where the <code>SyntheticMouseEvent</code> is the type synonym for a record that basically maps a javascript mouse event.</p>
<p>In Concur, the standard pattern is <code>Widget a = someDomElementWrapper [Prop a, Prop a, ...] [Widget a, Widget a,...]</code>. i.e. to get the return type of a Widget, you just need to look at the return type of any of the props passed to it, or the return type of any child widgets passed to it. In Concur, the types of the props, the children, and the parent widget itself must agree (or... concur, pun intended).</p>
<p>So the return type of <code>button [onClick] [text &quot;Say Hello&quot;]</code> is necessarily the same as the return type of <code>onClick</code> which is defined in <code>Concur.React.Props</code>. Which you will find is <code>SyntheticMouseEvent</code>.</p>
<p>If you try to check the type yourself in the purescript repl with :t, you would see the properties you can access on the event object -</p>
<pre><code>&gt; :t button [onClick] [text &quot;Say Hello&quot;]
Widget (Array ReactElement)
  (SyntheticEvent_
     ( altKey :: Boolean
     , button :: Number
     , buttons :: Number
     , clientX :: Number
     , clientY :: Number
     , ctrlKey :: Boolean
     , getModifierState :: String -&gt; Boolean
     , metaKey :: Boolean
     , pageX :: Number
     , pageY :: Number
     , relatedTarget :: NativeEventTarget
     , screenX :: Number
     , screenY :: Number
     , shiftKey :: Boolean
     , detail :: Number
     , view :: NativeAbstractView
     , bubbles :: Boolean
     , cancelable :: Boolean
     , currentTarget :: NativeEventTarget
     , defaultPrevented :: Boolean
     , eventPhase :: Number
     , isTrusted :: Boolean
     , nativeEvent :: NativeEvent
     , target :: NativeEventTarget
     , timeStamp :: Number
     , type :: String
     )
  )
</code></pre>
<p>Here the <code>Array ReactElement</code> is the same as <code>HTML</code>, and everything after that is the mouse event.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="ch02-03-composing-widgets.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="ch02-05-modifying-dom-on-events.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="ch02-03-composing-widgets.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="ch02-05-modifying-dom-on-events.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="ferris.js"></script>
        

        

    </body>
</html>
